- config:
    name: vue test
    base_url: http://127.0.0.1:8000/
    variables:
        device_sn: FwgRiO7CNA50DSU

- test:
    name: show_book
    request:
        headers:
            Content-Type: application/json
            User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.130 Safari/537.36
            app_version: 2.8.6
            device_sn: $device_sn
            os_platform: ios
        json:
            sign: 9c0c7e51c91ae963c833a4ccbab8d683c4a90c98
        method: POST
        url: api/get-token
    extract:
        token: content.token
    validate:
        - eq: [status_code, 200]
        - eq: [headers.Content-Type, application/json]
        - eq: [content.success, true]

- test:
    name: /api/users/$user_id
    variables:
        user_id: ${gen_user_id()}
    request:
        headers:
            Content-Type: application/json
            User-Agent: python-requests/2.18.4
            device_sn: $device_sn
            token: $token
        json:
            name: user1
            password: '123456'
        method: POST
        url: api/users/$user_id
    validate:
        - eq: [status_code, 201]
        - eq: [headers.Content-Type, application/json]
        - eq: [content.success, true]
        - eq: [content.msg, user created successfully.]
